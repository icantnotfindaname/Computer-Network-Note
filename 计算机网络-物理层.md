# 物理层



## 1.基本知识

### 基本概念

物理层解决**如何在解决各种计算机的传输媒体上传输数据比特流**，而不是指具体的传输媒体。
主要任务：确定与传输媒体接口有关的一些**特性**。=》**定义标准**
其中**特性**主要包括：
1. 机械特性
2. 电气特性
3. 功能特性
4. 规程特性

### 数据通信的基础知识

<img src="https://tlgur.com/d/GXMbQ30g" />

通信目的：传送消息
**数据**：传送消息的实体，通常是有意义的符号序列。
**信号**：数据的电气或者电磁表现，是数据在传输过程中的表现形式，分成**数字信号**和**模拟信号**。其中**数据信号**是**离散**的，**模拟信号**的参数取值是**连续**的。
**信源**：产生发送数据的**源头**。
**信宿**：接收数据的**终点**。
**信道**：信号的传输**媒介**。一般用来表示向某个方向传送信息的媒介，所以一条通信线路往往包含**两条**信道，一条发送信道和一条接收信道。信道可以分为**模拟信**和**数字信道**，也可以分为**无线信道**和**有线信道**。

### 数据通信中的三种通信方式

1. 单工通信：只有一个方向，仅需一条信道。
2. 半双工通信：可以接收或发送，但是**不能同时**，需要两条信道。
3. 全双工通信：可以同时发送和接收，需要两条信道，现在使用的多是这个。

### 信息传输方式

1. 并行传输：速度快，费用高，适合近距离
2. 串行传输：速度慢，费用低，适合远距离



## 2.重点知识

### 码元

**码元**指的是一个固定时长的信号波形，这个时长称为**码元宽度**，当码元的离散状态有M个时，此时的码元称为**M进制码元**。一个码元可以携带**多个**比特的信息量，比如一个四进制码元要用二进制来表示就必须用两个比特。

### 速率

数据的**传输速率**，表示单位时间内传输的数据量。可以用**码元传输速率**和**信息传输速率**表示。

1. 码元传输速率：表示单位时间内数字通信系统所传输的码元个数（也可以说是**脉冲个数**或者**信号变化的次数**，单位是**波特(Baud)**。一波特表示数字通信系统每秒传输一个码元。码元速率与进制数**无关**。也被称之为码元速率、波形速率、调制速率、符号速率等。
2. 信息传输速率：表示单位时间内数字通信系统传输的二进制码元个数，即**比特数**，单位为比特/秒(b/s)。也被称为信息速率、比特率。

### 带宽

表示在单位时间内从网络的一点到另一点所能通过的**最高数据率**，经常用来表示网络通信线路的数据传输能力，单位是b/s。

PS：在比较系统传输速率的时候通常比较的是**信息传输速率**。

### 基带传输与宽带传输

信道上传送的信号可以分为基带信号和过宽带信号：
1. 基带信号：将数字信号1和0直接用**两种不同的电压**表示，然后送到**数字信道**上去传输（基带传输）。基带信号其实就是**来自信源的信号**，就是发出的直接表达了`**要传输的信息的信号**，比如我们说话的声波就是一种基带信号。记住：**基带传输对应数字信号！**
2. 宽带信号：将基带信号进行**调制**后形成的**频分复用模拟信号**，再传送到**模拟信道**上去传输，即是**宽带传输**。具体：把基带信号经过**载波调制**（可以理解成**整容**）后，把信号的频率范围移动到**较高**的频段上以便在信道上传输（即仅在一定范围内能够通过信道）。PS：调制可以应对因为信道过长造成的**信号衰减**。

所以传输距离小的一般采用基带传输，距离大的采用宽带传输。

### 编码与调制

编码：用于把数据转换成**数字信号**。工具是**数据发送器**（数字数据）或者**PCM编码器**（模拟数据）。
调制：用于把数据转换成**模拟信号**。工具是**调制器**（数字数据）或者**放大器调制器**（模拟数据）。

具体讲解：
1. 数字数据编码为数字信号
    - 非归零编码 NRZ：高1低0。编码容易实现，但是没有检错功能，且无法判断一个码元的开始和结束，所以收发双方**难以保持同步**。
    - 归零编码 RZ：信号电平在一个码元之内都恢复到0。**所以0就是0，1是一段高一段0**。缺点在于在0的时候太多了，1的信道无法充分利用。
    - 反向不归零编码 NRZI：信号电平翻转表示0，不变表示1。缺点和NRZ有点像。
    - 曼彻斯特编码：将一个码元分解成等长的两部分，前低后高表示1，前高后低表示0，也可以反过来。每个码元中间出现电平跳变，所以可以用作**时钟信号**和**数据信号**，但所占的频带宽度是原始基带宽度的**两倍**。注意：一个时钟周期的时候信号变化了两次，脉冲次数是两次，所以码元传输速率其实是要翻倍的。所以数据传输速率只有调制速率的1/2。也可以看成：一个时钟周期之内有**两个码元**，但是只有**一个比特**。
    - 差分曼彻斯特编码：同1异0，看的是**虚线两边**的信号。抗干扰性要**强于**曼彻斯特编码。
    - 4B/5B编码：比特流中插入额外的比特来打破一连串的0或1，就是用5个比特来编码四个比特的数据，之后再传给接收方，编码效率为**80%**。具体就是每4个比特的数据都会对应有一个5比特的编码，其他16种额外的编码作为**控制码**使用。
    
    <img src="https://tlgur.com/d/GbkO5mag" />

2. 数字数据调制为模拟信号
    
- 大致分为三种方法：调幅、调频、调相。调相+调幅称为QAM。
    - 例题：某通信链路的波特率是1200Buad，采用4个相位，每个相位有4种振幅的QAM调制技术，则该链路的信息传输速率是**4800b/s**。
    
3. 模拟数据编码成数字信号
比如对音频信号进行编码的脉码调制PCM，主要包括**抽样、量化和编码**。
    - 抽样：对模拟信号进行周期性扫描，把时间上连续的信号变成时间上离散的信号。为了使所得的离散信号可以无失真地代表被抽样的模拟数据，要使用**采样定理**进行采样。采样定理：**$$f_{get} >= 2f_{highest}$$**
    - 量化：把抽样的电频幅值转化成对应的数字值，并取整数，这就把连续的电平幅值转换成离散的数字量。
    - 编码：把量化的结果转化成对应的二进制编码。

4. 模拟数据调制成模拟信号

  - 为了实现传输的有效性，可能需要较高的频率，所以需要调制。

### 失真
卖家秀和买家秀。xswl。
影响因素：码元传输速率、传输距离、噪声干扰、传输媒体质量。

#### 失真现象之：码间串扰。
信道带宽：信道能通过的**最高最低频率之差**。
码间串扰：接收端收到的信号波形失去了码元之间清晰**界限**的现象。就是码元的传输速率太快了，分不清楚了。

### 奈氏准则
在理想低通**（无噪声，带宽受限）**的条件下，为了避免码间串扰，极限码元传输速率为**2W**Buad，其中W是信道带宽，单位是**Hz**。注意：用的是Hz！

利用准则求极限数据率：$$2Wlog_2 V (b/s)$$  其中$$V$$是每码元对应的比特数。

结论：
1. 在任何信道中，码元传输速率是有上限的。
2. 信道的频带越宽，即通过的信号高频分量越多，就可以用更高的速率进行码元的有效传输。
3. 奈氏准则只给出了码元传输速率，没有限制信息传输速率。
4. 由于码元传输速率受到了奈氏准则的制约，所以要提高数据的传输速率，就必须设法使每个码元能携带更多个比特的信息量，这就需要采用**多元制**的调制方法。

### 香农定理
信噪比 = 信号的平均功率/噪声的平均功率，记为S/N，并用分贝（dB）作为度量单位。有：$$dB = 10log_{10}(S/N)$$

在**带宽受限且有噪声**的信道中，为了不产生误差，信息的数据传输速率有上限值。，上限值为$$Wlog_2(1+S/N)(b/s)$$。其中$$W$$的单位是Hz。注意：如果信噪比的单位是dB，需要**先对单位进行转换**。

只要信息的传输速率低于信道的极限传输速率，就一定可以找到某种方法实现**无差错的运输**。

### 物理层的传输介质

传输介质，又叫传输媒体/传输媒介，是数据传输系统中在发送设备和接收设备之间的物理通路。
注意：**传输媒体并不是物理层！**传输媒体在物理层的下面，有时候称为第0层，在传输媒体中传输的是信号，但它自己并不知道所传输的信号代表什么意思。物理层规定了**电气特性**，因此还能够识别所传送的**比特流**。（真-连傻瓜都不如）

传输介质分成两类，导向性和非导向性。
1. 导向性传输介质
    - 双绞线，又分为无屏蔽双绞线（STP）和屏蔽双绞线（UTP）。绞合是为了减少**对相邻导线的电磁干扰**。屏蔽双绞线在双绞线外面加了一个金属丝编制成的屏蔽层，也是为了减少干扰。
    - 同轴电缆：抗干扰性比双绞线更强，传输距离远，但是贵。
    - 光纤：传递的是**光脉冲**，带宽很**大**，在发送端要有光源（发光二极管等）。主要由纤芯和包层组成，包层折射率较低，所以只要入射角够大，就会出现全反射，所以损耗很低。可以分为多模光纤和单模光纤。多模光纤就是一次输入很多条光，单模则直接用横向模式传输（直接射过去）。单模损耗小，适合远距离传输；多模适合近距离传输。

2. 非导向性传输介质
    - 无线电波：信号向**所有方向**传播，穿透能力强，可传输远距离，广泛用于**通信领域**。
    - 微波：信号向**固定方向**传播，通信频率较高、频段范围宽，因此数据率很高。可用于**地面微波接力通信**或者**卫星通信**。
    - 红外线、激光：信号向**固定方向**传播，需要把传输的信号转换成**各自的信号格式**，然后再进行传播。



<img src="https://tlgur.com/d/4zZvRZV4" />












